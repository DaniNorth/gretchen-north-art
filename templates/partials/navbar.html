<nav class="bg-container-background border-b border-color px-6 py-4">
  <div class="flex justify-between items-center">
    <a href="/" class="text-heading-text text-xl font-bold">Gretchen North Art</a>

    <!-- mobile layout hamburger menu icon -->
    <div class="flex items-center sm:hidden">
      <button onclick="toggleNav()" class="text-heading-text text-2xl focus:outline-none">
        ☰
      </button>
    </div>

    <!-- Desktop Layout -->
    <div class="hidden sm:flex items-center space-x-6">
      <a href="/" class="text-link hover:text-link-hover">Home</a>
      <a href="{% url 'about' %}" class="text-link hover:text-link-hover">About</a>
      <a href="{% url 'cart' %}" class="text-link hover:text-link-hover">Cart</a>
      <a href="/admin/" class="text-link hover:text-link-hover">Admin</a>

      {% if user.is_authenticated %}
        <a href="{% url 'profile' %}" class="text-link hover:text-link-hover">My Profile</a>
        <a href="{% url 'account_logout' %}" class="text-link hover:text-link-hover">Logout</a>
      {% else %}
        <a href="{% url 'account_login' %}" class="text-link hover:text-link-hover">Login</a>
      {% endif %}
    </div>
  </div>

  {% if cart_hold_expires_at %}
    <div class="text-sm text-danger mt-2 sm:mt-3">
      ⏳ Hold expires in <span id="nav-timer">loading...</span>
    </div>
  {% endif %}

  <!-- Mobile Layout for a vertical and collapsable Navbar -->
  <div id="nav-links" class="hidden sm:hidden mt-4 flex flex-col space-y-3 text-right">
    <a href="/" class="text-link hover:text-link-hover">Home</a>
    <a href="{% url 'about' %}" class="text-link hover:text-link-hover">About</a>
    <a href="{% url 'cart' %}" class="text-link hover:text-link-hover">Cart</a>
    <a href="/admin/" class="text-link hover:text-link-hover">Admin</a>

    {% if user.is_authenticated %}
      <a href="{% url 'profile' %}" class="text-link hover:text-link-hover">My Profile</a>
      <a href="{% url 'account_logout' %}" class="text-link hover:text-link-hover">Logout</a>
    {% else %}
      <a href="{% url 'account_login' %}" class="text-link hover:text-link-hover">Login</a>
    {% endif %}
  </div>

  <script>
    function toggleNav() {
      const nav = document.getElementById('nav-links');
      nav.classList.toggle('hidden');
    }

    {% if cart_hold_expires_at %}
    document.addEventListener("DOMContentLoaded", function () {
      const navExpiresAt = new Date("{{ cart_hold_expires_at|date:'c' }}");
      const navTimerEl = document.getElementById("nav-timer");

      function updateNavTimer() {
        const now = new Date();
        const diff = navExpiresAt - now;
        if (diff <= 0) {
          navTimerEl.innerText = "expired";
          return;
        }
        const minutes = Math.floor(diff / 1000 / 60);
        const seconds = Math.floor((diff / 1000) % 60).toString().padStart(2, "0");
        navTimerEl.innerText = `${minutes}m ${seconds}s`;
      }

      updateNavTimer();
      setInterval(updateNavTimer, 1000);
    });
    {% endif %}
  </script>
</nav>

<!-- Coutdown timer implemented globally with help of ChatGPT -->